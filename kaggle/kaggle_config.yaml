# Kaggle股票趋势预测比赛配置文件
# 用于Kronos模型的微调

data:
  # 注意：这里需要先运行kaggle_data_preprocess.py生成合并的训练数据
  # 由于Kaggle数据包含多个ticker，我们需要合并所有ticker的数据用于训练
  # 或者为每个ticker单独训练（这里使用合并方式）
  data_path: "/mnt/shared-storage-user/zhaoliangliang/code/Kronos/kaggle_data/train_combined.csv"
  lookback_window: 256  # 历史窗口长度，根据数据量调整
  predict_window: 1     # 预测窗口，比赛要求预测下一个时间点的涨跌
  max_context: 512      # 最大上下文长度
  clip: 5.0
  # dataset split ratio
  train_ratio: 0.9
  val_ratio: 0.1
  test_ratio: 0.0

training:
  # control the training epochs of tokenizer and basemodel
  tokenizer_epochs: 20
  basemodel_epochs: 15
  batch_size: 32
  log_interval: 50
  num_workers: 4
  seed: 42
  
  tokenizer_learning_rate: 0.0002
  predictor_learning_rate: 0.00004
  
  adam_beta1: 0.9
  adam_beta2: 0.95
  adam_weight_decay: 0.1
  
  # gradient accumulation steps for tokenizer training
  accumulation_steps: 1

# model path configuration
model_paths:
  # pretrained model path - 需要根据实际路径修改
  pretrained_tokenizer: "/mnt/shared-storage-user/zhaoliangliang/model/Kronos-Tokenizer-base"
  pretrained_predictor: "/mnt/shared-storage-user/zhaoliangliang/model/Kronos-base"
  
  # experiment name - other paths will be generated based on this
  exp_name: "kaggle_stock_trends"
  base_path: "/mnt/shared-storage-user/zhaoliangliang/code/Kronos/kaggle_finetuned/"
  
  # the following paths will be generated based on exp_name
  base_save_path: ""
  finetuned_tokenizer: ""
  
  tokenizer_save_name: "tokenizer"
  basemodel_save_name: "basemodel"

experiment:
  name: "kaggle_stock_trends_finetune"
  description: "Fine-tune Kronos for Kaggle stock trends prediction"
  use_comet: false
  
  # control the training phase
  train_tokenizer: true
  train_basemodel: true
  
  # if true, skip the existing model training
  skip_existing: false

# device configuration
device:
  use_cuda: true
  device_id: 0

